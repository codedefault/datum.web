(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62480378"],{8660:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),o=function(e){return Object(a["K"])("data-v-105a62c6"),e=e(),Object(a["I"])(),e},c={class:"da-comment-container"},i=o((function(){return Object(a["n"])("h1",null,"交流&反馈",-1)})),u=o((function(){return Object(a["n"])("p",null,[Object(a["n"])("b",null,"为了您更好地使用DATUM，我们需要您的意见和建议！！！")],-1)})),r=o((function(){return Object(a["n"])("p",null,"请畅快表达您的想法，我们一直在聆听并不断优化...",-1)})),l=Object(a["p"])("发表留言"),s={style:{"margin-top":"20px"}},b=Object(a["p"])("发表留言"),d=Object(a["p"])("发表留言 "),g=Object(a["p"])("关 闭");function O(e,t,n,o,O,j){var f=Object(a["P"])("MessageOutlined"),p=Object(a["P"])("a-button"),m=Object(a["P"])("a-pagination"),h=Object(a["P"])("a-tooltip"),v=Object(a["P"])("a-comment"),k=Object(a["P"])("a-list-item"),y=Object(a["P"])("a-list"),S=Object(a["P"])("a-skeleton"),P=Object(a["P"])("a-textarea"),M=Object(a["P"])("a-form-item"),w=Object(a["P"])("a-modal");return Object(a["H"])(),Object(a["m"])("div",null,[Object(a["n"])("div",c,[i,u,r,Object(a["n"])("div",null,[Object(a["q"])(p,{type:"primary",onClick:e.handleShowSubmitMessage},{icon:Object(a["Z"])((function(){return[Object(a["q"])(f)]})),default:Object(a["Z"])((function(){return[l]})),_:1},8,["onClick"])]),e.guestBook.list.length>0?(Object(a["H"])(),Object(a["k"])(y,{key:0,class:"comment-list",header:"".concat(e.guestBook.list.length,"条留言"),"item-layout":"horizontal","data-source":e.guestBook.list},{renderItem:Object(a["Z"])((function(e){var t=e.item;return[Object(a["q"])(k,null,{default:Object(a["Z"])((function(){return[Object(a["q"])(v,{author:t.author,avatar:t.avatar},{content:Object(a["Z"])((function(){return[Object(a["n"])("p",null,Object(a["S"])(t.content),1)]})),datetime:Object(a["Z"])((function(){return[Object(a["q"])(h,{title:t.createdAtAsString},{default:Object(a["Z"])((function(){return[Object(a["n"])("span",null,Object(a["S"])(t.createdAtAsString),1)]})),_:2},1032,["title"])]})),_:2},1032,["author","avatar"])]})),_:2},1024)]})),default:Object(a["Z"])((function(){return[Object(a["q"])(m,{current:e.guestBook.page,"onUpdate:current":t[0]||(t[0]=function(t){return e.guestBook.page=t}),pageSize:e.guestBook.pageSize,"onUpdate:pageSize":t[1]||(t[1]=function(t){return e.guestBook.pageSize=t}),hideOnSinglePage:!0,total:e.guestBook.total,onChange:e.handlePageChanged},null,8,["current","pageSize","total","onChange"]),Object(a["n"])("div",s,[Object(a["q"])(p,{type:"primary",onClick:e.handleShowSubmitMessage},{icon:Object(a["Z"])((function(){return[Object(a["q"])(f)]})),default:Object(a["Z"])((function(){return[b]})),_:1},8,["onClick"])])]})),_:1},8,["header","data-source"])):Object(a["l"])("",!0),e.guestBook.list.length<=0?(Object(a["H"])(),Object(a["k"])(S,{key:1,loading:e.guestBook.loading,active:"",avatar:"",style:{"margin-top":"15px"}},null,8,["loading"])):Object(a["l"])("",!0)]),Object(a["q"])(w,{visible:e.guestBookModal.visible,"onUpdate:visible":t[3]||(t[3]=function(t){return e.guestBookModal.visible=t}),title:"发表留言",width:800,maskClosable:!1,class:"da-modal"},{footer:Object(a["Z"])((function(){return[Object(a["n"])("div",null,[Object(a["q"])(p,{loading:e.guestBookModal.submitting,type:"primary",onClick:e.handleSubmitMessage},{icon:Object(a["Z"])((function(){return[Object(a["q"])(f)]})),default:Object(a["Z"])((function(){return[d]})),_:1},8,["loading","onClick"]),Object(a["q"])(p,{onClick:e.handleHideMessageModal},{default:Object(a["Z"])((function(){return[g]})),_:1},8,["onClick"])])]})),default:Object(a["Z"])((function(){return[Object(a["n"])("div",null,[Object(a["q"])(v,null,{content:Object(a["Z"])((function(){return[Object(a["q"])(M,null,{default:Object(a["Z"])((function(){return[Object(a["q"])(P,{value:e.guestBookModal.message.content,"onUpdate:value":t[2]||(t[2]=function(t){return e.guestBookModal.message.content=t}),rows:5,placeholder:"我们需要您的宝贵建议来进一步优化您的体验..."},null,8,["value"])]})),_:1})]})),_:1})])]})),_:1},8,["visible"])])}var j=n("b775"),f=function(e){return Object(j["a"])({url:"/guest_book/paged_list",method:"post",data:e})},p=function(e){return Object(j["a"])({url:"/guest_book/create",method:"post",data:e})},m=n("f64c"),h=n("5502"),v=n("6c02"),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},y=k,S=n("b3f0");function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){M(e,t,n[t])}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e,t){var n=P({},e,t.attrs);return a["q"](S["a"],a["x"](n,{icon:y}),null)};w.displayName="MessageOutlined",w.inheritAttrs=!1;var B=w,Z=Object(a["r"])({name:"guestbook",components:{MessageOutlined:B},setup:function(){var e=Object(a["L"])({loading:!0,page:1,pageSize:20,total:0,list:[]}),t=Object(a["L"])({visible:!1,submitting:!1,message:{content:""}}),n=function(){f({page:e.page,pageSize:e.pageSize}).then((function(t){200===t.code&&(e.list=t.data,e.total=t.total),e.loading=!1})).catch((function(t){e.loading=!1}))};Object(a["E"])((function(){n()}));var o=Object(h["b"])(),c=Object(v["d"])(),i=function(){o.getters.isAuthenticated?t.visible=!0:c.push("/login")},u=function(){t.visible=!1},r=function(){var e={content:t.message.content,authorName:o.getters.userProfile.displayName,authorId:o.getters.userProfile.id,authorAvatar:o.getters.userProfile.avatar};return e.content?e.content.length>2e3?(m["a"].destroy(),void m["a"].warning("留言内容不可超过2000个字")):void p(e).then((function(e){e.success?(m["a"].success(e.message),t.message.content="",n()):m["a"].warning(e.message),t.visible=!1})):(m["a"].destroy(),void m["a"].warning("请输入留言内容"))},l=function(t,a){e.page=t,n()};return{guestBook:e,guestBookModal:t,loadGuestBookPagedList:n,handleSubmitMessage:r,handleShowSubmitMessage:i,handleHideMessageModal:u,handlePageChanged:l}}}),q=(n("c5ad"),n("6b0d")),C=n.n(q);const _=C()(Z,[["render",O],["__scopeId","data-v-105a62c6"]]);t["default"]=_},c5ad:function(e,t,n){"use strict";n("f03e")},f03e:function(e,t,n){}}]);